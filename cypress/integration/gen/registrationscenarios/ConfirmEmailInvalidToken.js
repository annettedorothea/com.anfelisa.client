/********************************************************************************
 * generated by de.acegen 1.2.1
 ********************************************************************************/




import * as ScenarioUtils from "../../../acegen/src/ScenarioUtils";
import AppUtils from "../../../../es6/src/app/AppUtils";
import * as RegistrationActionIds from "../../../acegen/gen/registration/RegistrationActionIds";
import * as CommonActionIds from "../../../acegen/gen/common/CommonActionIds";

const testId = ScenarioUtils.testId();

context('ConfirmEmailInvalidToken', () => {
    beforeEach(() => {
    	let nonDeterministicValues;
    	let nonDeterministicValue;
		ScenarioUtils.getCypressFor(CommonActionIds.init);
		ScenarioUtils.getCypressFor(CommonActionIds.route, [`#registration`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.usernameChanged, [`username-${testId}`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.passwordChanged, [`pas`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.passwordRepetitionChanged, [`password`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.passwordChanged, [`password`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.emailChanged, [`info@anfelisa.de`]);
		nonDeterministicValues = JSON.parse(localStorage.getItem('nonDeterministicValues'));
		if (!nonDeterministicValues) {
			nonDeterministicValues = [];
		}
		nonDeterministicValue = {
			uuid: `uuid-${testId}`
		};
		nonDeterministicValues.push(nonDeterministicValue);
		AppUtils.httpPut(`/api/test/non-deterministic/value?uuid=uuid-${testId}&key=token&value=${testId}-TOKEN`);
		localStorage.setItem('nonDeterministicValues', JSON.stringify(nonDeterministicValues));
		ScenarioUtils.getCypressFor(RegistrationActionIds.registerUser);
		ScenarioUtils.getCypressFor(CommonActionIds.logout);
		ScenarioUtils.getCypressFor(CommonActionIds.route, [`#registration`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.usernameChanged, [`Admin`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.passwordChanged, [`password`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.passwordRepetitionChanged, [`password`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.emailChanged, [`info@anfelisa.de`]);
		ScenarioUtils.getCypressFor(RegistrationActionIds.registerUser);
    })

			// Hallo?!?!?
    it('confirmEmailFails ', () => {
		//0
		ScenarioUtils.getCypressFor(RegistrationActionIds.confirmEmail, [`Admin`,`${testId}-TOKEN`]).should(() => {
			const appState = JSON.parse(localStorage.getItem('appState'))
			expect(appState.rootContainer.messages, "confirmEmailFails").to.eql([
				{ 
					textKey : `confirmEmail`,
					type : `info`,
					visible : true,
					id : 0
				},
				{ 
					code : 400,
					text : `Bad Request`,
					textKey : `usernameAlreadyTaken`,
					type : `error`,
					visible : true,
					id : 1
				},
				{ 
					code : 400,
					text : `Bad Request`,
					textKey : `tokenDoesNotMatch`,
					type : `error`,
					visible : true,
					id : 2
				}
			]
			)
		});
    })
})




/******* S.D.G. *******/




